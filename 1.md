1. **与通用计算机系统相比，嵌入式计算机系统具有哪些重要特点？嵌入式计算机系统出现以后现代测试系统出现哪些变化。**

   ------

   存储资源匮乏，速度慢，对可靠性要求较高

   嵌入式计算机属于特殊的计算机系统，需要专门的工具开发

   系统中大部分计算与控制由MCU实现，其他线路由MCU的接口电路，承担着输入输出等功能。提高了系统稳定性。

2. **简要阐述学习微控制器的基本知识要素**

   ------

   以MCU为核心进行设计。CPU 存储器、定时器。以及多种输入输出。

3. **什么是下拉电阻？下拉电阻作用是什么？什么是上拉电阻？上拉电阻作用是什么？给出一个开关接入 MCU 引脚的基本方法，举例说明如何把 KL25 的某一引脚设定为输入引脚并获得引脚的情况？**

   ------

   MCU的某个引脚通过一点电阻接地，就是下拉电阻。使引脚初始化为低电平。反之就是上拉电阻。

   上拉电阻接法、下拉电阻接法、直接接地法（不推荐）P72页

4. **（1）写出 BSET、BCLR、BGET 三个位操作宏函数；**

    ------

    ```c
    #define BSET(bit,Register)  ((Register)|= (1<<(bit)))    //置寄存器的一位
    
    #define BCLR(bit,Register)  ((Register) &= ~(1<<(bit)))  //清寄存器的一位
    
    #define BGET(bit,Register)  (((Register) >> (bit)) & 1)  //获得寄存器一位的状态
    
    ```

    

   **（2）解释并举例说明下述宏函数的含义：**

> \#define GPIO\_PORT(x) (\*(vuint8 \*)(0x00000065+(x))

​	获取基地址0x00000065，偏移量位x的地址
5. **MCU 内部有 Flash 存储器和 RAM，它们各自的主要作用是什么？给出 KL25 芯片 Flash 存储器和 RAM 的地址范围，并举例说明典型情况下程序从何地址开始放？常量放在何处？全局变量从何地址开始存放？局部变量放在何处？**

------

RAM:程序运行中随机存取（掉电数据消失）0x1FFF_F000~0x2000_2FFF 全局 静态 临时变量 全局从小地址到大地址存放，局部变量从大地址到小地址存放

flash:永久保存 0x0000_0000~0x0001_FFFF  中断 程序代码 常数 前192B为中断向量表

6. **编写底层驱动构件时，一般应注意哪几个方面？构件封装为什么禁止使用全局变量？**

------

层次化、易用性、鲁棒性 对内存的可靠使用。 因为全局变量在程序任何一个地方都可以使用，其他程序不需要使用构件的接口也能使用到，这样对程序工作带来隐患，不利于高内聚低耦合。

7. **什么是硬件构件？根据硬件构件的接口类型不同，硬件构件分为哪三种类型？举例说明之。**

------

一个或多个硬件功能模块、支撑电路和功能描述封装成一个可重用的硬件实体

核心构件、中间构件、终端构件。

| 硬件构建 |     举例     |
| :------: | :----------: |
| 核心构件 | 芯片最小系统 |
| 中间构件 |   电源控制   |
| 终端构件 |     LED      |



8. **举例说明 GPIO 的基本编程步骤，给出 GPIO 构件封装要点（即封装哪些函数？为什么？参数是什么？）**
------
- 端口控制模块的引脚控制寄存器的MUX设定为GPIO
- 设置数据方向寄存器
  - 若输出则通过设置输出寄存器指定输出的是低电平还是高电平
  - 若输入则通过输入寄存器获取引脚的状态


   初始化（端口号，输入还是输出，初始值）

   设置引脚（端口号，值）

   获取引脚（端口号）

   反转（端口号）

   这样就能基本满足GPIO的基本操作

9. **在实际 UART 通信中，为了保证通信的稳定性，通常需要将数据封装成帧进行发送，请举例说明帧的封装要点，并阐述理由**
------
要有校验、要有帧头和帧尾不然无法区分开始和结束、要知道帧的长度，不然无法区分 遇到的帧尾是真的帧尾还是数据帧

10. **简述 KL250 的 UART 模块发送一个字节数据与接收一个字节数据的基本编程方法，给出基本程序；并给出 KL25 的 UART 构件中函数功能及参数描述。**
------
接收时，把外部的单线输入的数据变成一个字节的并行数据送入MCU内部

发送时，把需要发送的一个字节的并行数据转换为单线输出

uart_re1（UART2,&flag）//接受一个字节，成功flag 为1 UART表示连接的串口

uart_send1（UART2,ch）//返回一个字节 

11. **举例给出 3\*4 键盘与 KL25 的连接方法，给出键值，说明扫描编程原理，给出扫描 1 次键盘的程序。**
------
把列线n1~n4接到MCU输入引脚，行线m1~m3接输出引脚。行m1为**低电平**，m2 m3为**高电平**，并读取列线的状态。如果列线全是高电平，则没有键按下，如果有一个低电平 那么那个键按下了。接下来让m2为低电平······ 例： 7的键值：m1 和n1为0  m1m2m3n1n2n3n4 为 0110111，取第一位是0，得到

| 行\列 |  n1  |      |  n2  |      |  n3  |      |  n4  |      |
| :---: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |
|       |  值  | 键值 |  值  | 键值 |  值  | 键值 |  值  | 键值 |
|  m1   |  7   | 0x37 |  4   |  0x3B    |  1   | 0x3D     |  *   |  0x3E    |
|  m2   |  8   | 0x57 |  5   | 0x5B     |  2   |  0x5D|  0   |  0x5E    |
|  m3   |  9   | 0x67 |  6   |   0x6B|  3   |  0x6D    |  #   |  0x6E    |

```c
KBinit();
for(i = 0;i < 3; i++)
{
    for(n = 0;n < 4;n++){	gpio_set(k[n],1);}
    gpio_set(k[i],0);
    for(n = 0;n < 4;n++)
    {
        if(gpio_get(k[n]) == 0)
        {
            计算键值，存储键值;
            flag = 1;break;
        }
    }
    if(flag == 1)break;
}
return 键值;
```



12. **阐述 I2C 通信的基本原理及编程知识点。**
------
主机发送一个开始信号，启动I2C通信，主机对从机寻址，然后再总线上传输数据。结束后主机发送停止信号，结束通信。

   I2C两个模块，各有11个8位寄存器，了解这几个寄存器就可以编程了。

13. **简述扫描法 LED 显示编程的基本原理，给出 LED 的构件封装设计**
------
每个接线宏定义，使用静态变量确定下次位选信号，将4个字节数组传入LEDshow函数。隔10ms运行一次，就可以了

14. **解释 Flash 擦写的含义，说明 KL25 片内 Flash 组织方式，给出 Flash 构件的头文件内容。**
------
擦除：将存储单元的内容由0变成1；写入：把某些位的1变成0；

```c
flash_init();
flash_eraser();
flash_write();
flash_read_logic();
flash_read_physical();
flash_protect();
flash_isempty();
```
15. **在 KL25 的 Flash 在线编程过程中，设计擦除与写入子程序时，应该注意哪些问题？说明 Flash 构件封装要点**
------
第一个扇区存放中断向量表和flash配置字段，不建议擦除。找出flash存储位置，找出未使用的空间作为可用资源编程。写入时要保证已经被擦除过。 封装 按上面的内容来。

16. **说明 A/D 转换的基本知识点，给出 A/D 转换的构件封装要点及获得 KL25 内部温度的编程方法。**
------
将电压信号转换成数字信号

初始化,读取通道的值，回归函数，然后输出外面想要的值

获取26通道的值，使用回归函数，输出

17. **简要阐述 A/D 转换中有哪几个基本问题，说明其含义？**
------

转换精度、转换速度、单端输入与差分输入、AD参考电压、滤波问题、物理量回归

18. **说明 SPI 的基本工作原理；设在 SPI 通信中，接收方要求空闲时时钟信号为高电平、从线上取数是在时钟的下降沿，请给出 SPI 的时序图。**
------
从主机CPU发出启动传输信号开始，将要传输的数据装入8位移位寄存器，并同时产生8个时钟信号依次从SCK引脚送出去，在SCK控制下，主机中8个移位寄存器中的数据从MOSI引脚送出，到从机的MOSI引脚送入它的移位寄存器。P305页图

19. **冷复位和热复位的主要区别是什么？编程时应注意什么？举例说明主动热复位的作用。**
------
冷复位是断电的时候复位，热复位是通电的情况下复位。

热复位可以及时有效的复位。

20. **阐述 SPI 时序中相位、时钟极性的含义，给出一个基本时序图，说明实际编程时的基本要求。**
------
时钟极性：空闲时是高电平还是低电平

时钟相位：时钟信号SCK的第一个边沿出现在第一位数据的开始还是中央

时钟极性要明确，接受时是上升沿取数还是下降沿取数

21. **画出 I2C 通信时序图，设主机地址为：0b0001 101，从机地址为：0b0100 101，主机向从机发送数据 0x86。**
------



22. **看门狗的含义是什么？简述 KL25 启动看门狗设置方法及工作原理。**
------

看门狗定时器有监视功能，当程序关键系统时钟停止引起严重后果，可以通过看门狗复位，回到安全的状态。

工作原理：正常情况下，软件定期将看门狗清零，如果程序丢失，将复位。

看门狗复位清零（SIM_SRVCOP写入0x55和0xAA），时钟源选择和超时时间设置（SIM_COPC[COPCLKS]）

23. **写出下列英文简写的英文全称和中文翻译。**
------
MCU，Microcontroller Unit 单片机

ADC，Analog To Digital Converter 模数转换器

GPIO，general purpose I/O 外设接口

UART，Universal Asynchronous Receiver-Transmitters 通用异步收发器

PWM，Pulse Width Modulator 脉宽调制

CPU，Central Processing Unit 中央处理单元

LCD，Liquid Crystal Display 液晶显示器

MISO，Master In/Slave Out 主机输入，从机输出数据线

RAM，random access memory  随机存储器

DAC，Digital to analog converter 数模转换器

SPI，Serial Peripheral Interface  串行外设接口 

RTOS，Real Time Operating System  实时操作系统

ALU，Arithmetic Logical Unit  算术逻辑单元

IRQ，Interrupt Request  中断请求

COP，Computer Operating Properly Watchdog 看门狗

MOSI，Master Out/Slave In 主机输出，从机输入数据线


